var newcar=function(t){"use strict";function e(t,e,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(t):r?r.value:e.get(t)}class s{#t=[];playOnCar(t){for(const e of this.#t)e.onRegister(t);const e=[...this.#t];e.sort(((t,e)=>t.startFrame-e.startFrame)),t.onUpdate((t=>{for(const s of e)if(!(-1!==s.length&&t>=s.startFrame+s.length)){if(t<s.startFrame)break;s.onDrawFrame(t-s.startFrame,this)}}))}addItem(t){return this.#t.push(t),this}}class r{#e=[];playOnCar(t){t.onUpdate((t=>{this.#e.forEach((e=>{t===e.startFrame?e.audio.play():t===e.startFrame+e.length&&null!==e.length&&(console.log("pause!"),e.audio.pause())}))}))}addRadio(t){this.#e.push(t)}}class a{#s;#r=[];#a=[];#i;#o=0;#n=0;#h=null;isSuspend=!1;constructor(t,e){return this.#s=t,this.#s.getContext&&(this.#o=e,this.#h=this.#s.getContext("2d")),this}onUpdate(t){return this.#a?.push(t),this}forStart(t){return this.#i=t,this}suspend(t){void 0!==t&&(this.#n=t),this.isSuspend=!0}continue(t){void 0!==t&&(this.#n=t),this.isSuspend=!1}startFrame(){if(null===this.#h)return;this.#i&&this.#i();const t=(e,s)=>{e.forEach((e=>{const r=e.x,a=e.y;void 0===s||(e.x+=s.x,e.y+=s.y),e.onUpdate(this.#h),t(e.children,e),e.x=r,e.y=a}))};setInterval((()=>{this.#h?.clearRect(0,0,this.#s.width,this.#s.height),this.isSuspend||(this.#n+=1),this.#a?.forEach((t=>{t&&t(this.#n)})),t(this.#r)}),1e3/this.#o)}linkObject(t){this.#r.push(t)}}class i{display=!0;#l=0;#d=0;#u=0;#c=1;#p=1;#g;#f;#b=[];#m="source-over";#w;#x;constructor(t){this.x=t.x,this.y=t.y,void 0!==t.contextX?this.#g=t.contextX:this.#g=this.#l,void 0!==t.contextY?this.#f=t.contextY:this.#f=this.#d,void 0!==t.scaleX&&(this.#c=t.scaleX),void 0!==t.scaleY&&(this.#p=t.scaleY),void 0!==t.display&&(this.display=t.display),void 0!==t.rotation&&(this.#u=t.rotation),void 0!==t.operation&&(this.#m=t.operation),void 0!==t.children&&(this.#b=t.children),void 0!==t.rotationCenterX?this.#w=t.rotationCenterX:this.#w=this.#l,void 0!==t.rotationCenterY?this.#x=t.rotationCenterY:this.#x=this.#d}onDraw(t){return t}onUpdate(t){!0===this.display&&(t.save(),t.translate(this.#w,this.#x),console.log(this.#w,this.#l,this.#x,this.#d),t.rotate(this.#u),t.scale(this.#c,this.#p),t.globalCompositeOperation=this.#m,this.onDraw(t),t.restore())}hide(){this.display=!1}appear(){this.display=!0}setContextPosition(t,e){return this.#g=t,this.#f=e,this}addChild(...t){t.forEach((t=>{this.#b.push(t)}))}get sigh(){return"CarObject"}get children(){return this.#b}get x(){return this.#l}set x(t){this.#l=t,this.#w=t}get y(){return this.#d}set y(t){this.#d=t,this.#x=t}set scaleX(t){this.#c=t}get scaleX(){return this.#c}set scaleY(t){this.#p=t}get scaleY(){return this.#p}get contextX(){return this.#g}get contextY(){return this.#f}get rotation(){return this.#u}set rotation(t){this.#u=t}get operation(){return this.#m}set operation(t){this.#m=t}}class o extends i{#y;#v;#C;#F="sans-serif";#_="start";#T="middle";constructor(t){super(t),this.#y=t.text,this.x=t.x,this.y=t.y,void 0===t.size?this.#v=10:this.#v=t.size,void 0===t.color?this.#C="black":this.#C=t.color,void 0!==t.fontFamily&&(this.fontFamily=t.fontFamily),void 0!==t.align&&(this.#_=t.align),void 0!==t.baseline&&(this.#T=t.baseline)}onDraw(t){return super.onDraw(t),t.font=`${this.#v}px ${this.#F}`,t.textAlign=this.#_,t.textBaseline=this.#T,t.fillStyle=this.#C,t.fillText(this.#y,0,0),t}get color(){return this.#C}set color(t){this.#C=t}get fontFamily(){return this.#F}set fontFamily(t){this.#F=t}get align(){return this.#_}set align(t){this.#_=t}get baseline(){return this.#T}set baseline(t){this.#T=t}get text(){return this.#y}set text(t){this.#y=t}get size(){return this.#v}set size(t){this.#v=t}get sigh(){return"Text"}}class n extends i{#A=[];#M=0;constructor(t){super(t),this.x=t.x,this.y=t.y}deleteStatus(t){delete this.#A[t]}setStatus(t,e){void 0===e?this.#A.push(t):this.#A[e]=t}onDraw(t){return super.onDraw(t),t.drawImage(this.#A[this.#M],0,0),t}set status(t){this.#M=t}get status(){return this.#M}get length(){return this.#A.length}get sigh(){return"Spirit"}}class h extends i{constructor(t){super(t),this.x=t.x,this.y=t.y}onDraw(t){return super.onDraw(t),t}}class l extends i{#I;#P;#C="black";#O=1;constructor(t){super(t),this.#I=t.startPoint,this.#P=t.endPoint,void 0!==t.color&&(this.#C=t.color),void 0!==t.width&&(this.#O=t.width)}onDraw(t){return super.onDraw(t),t.beginPath(),t.strokeStyle=`${this.#C}`,t.lineWidth=this.#O,t.moveTo(this.primaryPoints[0].x,this.primaryPoints[0].y),t.lineTo(this.primaryPoints[1].x,this.primaryPoints[1].y),t.stroke(),t}get primaryPoints(){return[this.#I,this.#P]}set startX(t){this.#I.x=t}set startY(t){this.#I.y=t}set endX(t){this.#P.x=t}set endY(t){this.#P.y=t}}class d extends i{#j;#X;#Y;constructor(t){super(t),this.#j=t.f,this.#X=t.start,this.#Y=t.end}onDraw(t){super.onDraw(t),t.beginPath(),t.moveTo(this.#X,this.#j(this.#X));let e=this.#X;for(;e<=this.#Y;e+=1)t.lineTo(e,this.#j(e));return t.stroke(),t}get startVariable(){return this.#X}set startVariable(t){this.#X=t}get endVariable(){return this.#Y}set endVariable(t){this.#Y=t}}class u extends i{#V;#D;#k;#E="black";#S=null;constructor(t){super(t),this.#V=t.radius,this.x=t.x,this.y=t.y,void 0===t.startAngle?this.#D=0:this.#D=t.startAngle,void 0===t.endAngle?this.#k=2*Math.PI:this.#k=t.startAngle,void 0!==t.borderColor&&(this.#E=t.borderColor),void 0!==t.fillColor&&(this.#S=t.fillColor)}onDraw(t){return super.onDraw(t),t.moveTo(this.contextX,this.contextY),t.beginPath(),t.arc(0,0,this.#V,this.#D,this.#k),null!==this.#S&&(t.fillStyle=this.#S,t.fill()),t.strokeStyle=this.#E,t.stroke(),t}get startAngle(){return this.#D}set startAngle(t){this.#D=t}get endAngle(){return this.#k}set endAngle(t){this.#k=t}}class c extends i{#z=[];#E="black";#$=1;#S=null;constructor(t){super(t),this.#z=t.points,void 0!==t.borderColor&&(this.#E=t.borderColor),void 0!==t.fillColor&&(this.#S=t.fillColor),void 0!==t.borderWidth&&(this.#$=t.borderWidth)}onDraw(t){return t.lineWidth=this.#$,t.strokeStyle=`${this.#E}`,null!==this.#S&&(t.fillStyle=`${this.#S}`),t.moveTo(this.#z[0].x,this.#z[0].y),t.beginPath(),this.#z.forEach((e=>{t.lineTo(e.x,e.y)})),t.lineTo(this.#z[0].x,this.#z[0].y),t.stroke(),t}}const p=(t=>(t.Carobj=i,t.Text=o,t.Spirit=n,t.Point=h,t.Line=l,t.MathImage=d,t.Circle=u,t.Polygon=c,t))({});class g{onRegister(t){}}class f{#W;#B;#Q;constructor(t,e,s){this.#W=t,this.#B=e,this.#Q=s}interpolate(t){return this.#W+this.#Q(t)*(this.#B-this.#W)}}const b=t=>t;class m extends g{#U;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.x,t.bindTo.y],this.#U={length:t.lastsFor??null,start:t.startAt??null,obj:t.bindTo??null,interpolatorx:new f(t.from[0],t.to[0],t.by??b),interpolatory:new f(t.from[1],t.to[1],t.by??b)}}get length(){return this.#U.length}get startFrame(){return this.#U.start}onDrawFrame(t,e){this.#U.obj.x=this.#U.interpolatorx.interpolate((t+1)/this.#U.length),this.#U.obj.y=this.#U.interpolatory.interpolate((t+1)/this.#U.length)}}class w extends g{#U;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??t.bindTo.rotation,this.#U={start:t.startAt,obj:t.bindTo,interpolator:new f(t.from,t.to,t.by??b),length:t.lastsFor}}onDrawFrame(t,e){this.#U.obj.rotation=this.#U.interpolator.interpolate((t+1)/this.#U.length)}get startFrame(){return this.#U.start}get length(){return this.#U.length}}class x extends g{#U;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.scaleX,t.bindTo.scaleY],this.#U={obj:t.bindTo,interpolatorx:new f(t.from[0],t.to[0],t.by??b),interpolatory:new f(t.from[1],t.to[1],t.by??b),length:t.lastsFor,start:t.startAt}}onDrawFrame(t,e){this.#U.obj.scaleX=this.#U.interpolatorx.interpolate((t+1)/this.#U.length),this.#U.obj.scaleY=this.#U.interpolatory.interpolate((t+1)/this.#U.length)}get startFrame(){return this.#U.start}get length(){return this.#U.length}}class y extends g{#U;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);this.#U={length:t.lastsFor,start:t.startAt,obj:t.bindTo}}onDrawFrame(t,e){this.#U.obj.status=t%this.#U.obj.length}get startFrame(){return this.#U.start}get length(){return this.#U.length}}class v extends g{#U;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.startVariable,t.bindTo.startVariable],this.#U={length:t.lastsFor-t.startAt,start:t.startAt,obj:t.bindTo,interpolatorstart:new f(t.from[0],t.to[0],t.by??b),interpolatorend:new f(t.from[1],t.to[1],t.by??b)}}onDrawFrame(t,e){this.#U.obj.startVariable=this.#U.interpolatorstart.interpolate((t+1)/this.#U.length),this.#U.obj.endVariable=this.#U.interpolatorend.interpolate((t+1)/this.#U.length)}get startFrame(){return this.#U.start}get length(){return this.#U.length}}class C extends g{#U;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.startAngle,t.bindTo.endAngle],this.#U={length:t.lastsFor,start:t.startAt,obj:t.bindTo,interpolatorstart:new f(t.from[0],t.to[0],t.by??b),interpolatorend:new f(t.from[1],t.to[1],t.by??b)}}onDrawFrame(t,e){this.#U.obj.startAngle=this.#U.interpolatorstart.interpolate((t+1)/this.#U.length),this.#U.obj.endAngle=this.#U.interpolatorend.interpolate((t+1)/this.#U.length)}get startFrame(){return this.#U.start}get length(){return this.#U.length}}class F extends g{#U;constructor(t){super();let e="";if(e="at",void 0===t.at||(e="func",void 0===t.run))throw new Error(`be unset data "${e}"`);this.#U={frame:t.at/2,func:t.run}}onDrawFrame(t,e){t===this.#U.frame&&this.#U.func()}get startFrame(){return this.#U.frame}get length(){return this.#U.frame+1}}class _ extends g{#U;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="bindTo",void 0===t.bindTo)||(e="mutateContentTo",void 0===t.mutateContentTo))throw new Error(`be unset data "${e}"`);this.#U={start:t.startAt,textObject:t.bindTo,mutateTo:t.mutateContentTo}}onDrawFrame(t,e){this.#U.textObject.text=this.#U.mutateTo}get startFrame(){return this.#U.start}get length(){return 1}}const T=(t=>(t.Translation=m,t.Rotation=w,t.Scale=x,t.ChangingStatus=y,t.Limit=v,t.AngleCircle=C,t.SingleFrameAction=F,t.MutateContent=_,t.AnimationBuilderItem=g,t))({});function A(t){return 1-Math.cos(t*Math.PI/2)}function M(t){return Math.sin(t*Math.PI/2)}function I(t){return-(Math.cos(Math.PI*t)-1)/2}function P(t){return t*t}function O(t){return 1-(1-t)*(1-t)}function j(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}function X(t){return t*t*t}function Y(t){return 1-Math.pow(1-t,3)}function V(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function D(t){return t*t*t*t}function k(t){return 1-Math.pow(1-t,4)}function E(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}function S(t){return t*t*t*t*t}function z(t){return 1-Math.pow(1-t,5)}function $(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}function W(t){return 0===t?0:Math.pow(2,10*t-10)}function B(t){return 1===t?1:1-Math.pow(2,-10*t)}function Q(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}function U(t){return 1-Math.sqrt(1-Math.pow(t,2))}function R(t){return Math.sqrt(1-Math.pow(t-1,2))}function q(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}function N(t){const e=1.70158;return 2.70158*t*t*t-e*t*t}function L(t){const e=1.70158;return 1+2.70158*Math.pow(t-1,3)+e*Math.pow(t-1,2)}function G(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}function H(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)}function J(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}function K(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}function Z(t){return 1-tt(1-t)}function tt(t){const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375}function et(t){return t<.5?(1-tt(1-2*t))/2:(1+tt(2*t-1))/2}const st=(t=>(t.easeInBack=N,t.easeInBounce=Z,t.easeInCirc=U,t.easeInCubic=X,t.easeInElastic=H,t.easeInExpo=W,t.easeInOutBack=G,t.easeInOutBounce=et,t.easeInOutCirc=q,t.easeInOutElastic=K,t.easeInOutCubic=V,t.easeInOutExpo=Q,t.easeInOutQuad=j,t.easeInOutQuart=E,t.easeInOutQuint=$,t.easeInOutSine=I,t.easeInQuad=P,t.easeInQuart=D,t.easeInQuint=S,t.easeInSine=A,t.easeOutBack=L,t.easeOutBounce=tt,t.easeOutCirc=R,t.easeOutCubic=Y,t.easeOutElastic=J,t.easeOutExpo=B,t.easeOutQuad=O,t.easeOutQuart=k,t.easeOutQuint=z,t.easeOutSine=M,t.Linear=b,t))({});var rt,at,it;return rt=new WeakMap,at=new WeakMap,it=new WeakMap,window.onload=()=>{console.log("   ____  ___ _      ___________ ______\n  / __ \\/ _ \\ | /| / / ___/ __  / ___/\n / / / /  __/ |/ |/ / /__/ /_/ / /    \n/_/ /_/\\___/|__/|__/\\___/\\__,_/_/\n\n%cThe animation is powered by %c newcar %c v0.2.0  %c\n\nlink: https://github.com/Bug-Duck/newcar\n ","font-size: 14px","background-color: orange; padding: 7px; font-size: 14px","background-color: grey; padding: 7px; font-size: 14px")},t.Car=class{constructor(t,e){return rt.set(this,new s),at.set(this,new r),it.set(this,void 0),function(t,e,s,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?a.call(t,s):a?a.value=s:e.set(t,s)}(this,it,new a(t,e),"f"),this}addObject(t){return e(this,it,"f").linkObject(t),this}addAnimationItem(t){return e(this,rt,"f").addItem(t),this}addSoundItem(t){return e(this,at,"f").addRadio(t),this}startPlay(){e(this,rt,"f").playOnCar(e(this,it,"f")),e(this,at,"f").playOnCar(e(this,it,"f")),e(this,it,"f").startFrame()}onUpdate(t){e(this,it,"f").onUpdate(t)}suspend(t){e(this,it,"f").suspend(t)}continue(t){e(this,it,"f").continue(t)}},t.Sound=class{#R=null;#q=null;#N=null;#L;#G=1;constructor(t,e,s){this.#R=t,this.#q=e,void 0!==s&&(this.#N=s-e),this.#L=new Audio(this.#R),this.#L.volume=this.#G}get path(){return this.#R}get length(){return this.#N}get startFrame(){return this.#q}get audio(){return this.#L}},t.animation=T,t.interpolator=st,t.object=p,t}({});
//# sourceMappingURL=newcar.min.js.map
